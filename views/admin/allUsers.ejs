<!-- admin/allUsers.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ramjikisena</title>
  <link rel="stylesheet" href="/stylesheets/admin.css">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet" />

</head>

<body>
  <div class="main">

    <nav>
      <div class="left">
        <img src="https://cdn-icons-png.flaticon.com/512/7068/7068006.png" alt="" />
        <h1>Admin Panel</h1>
      </div>
      <div class="right">
        <a id="home-btn" href="/admin/dashboard">Home</a>
        <i class="ri-menu-line"></i>
      </div>

      <div id="slidebar">
        <div id="close">
          <i class="ri-close-fill" style="color: white;"></i>
        </div>

        <div id="text">
          <a href="/admin/allUsers">View users</a>
          <a href="/register">Create user</a>
          <a href="/">Login user</a>
          <a href="/admin/downloadUsers">Download user info</a>
          <a href="/contact">Contact</a>
          <a href="/gallery">Gallery</a>
        </div>
      </div>
    </nav>

    <!-- <a href="/admin/downloadUsers" class="download-btn" download> Download All User Information (CSV)</a> -->

    <div class="allUsers-table">
      <table>
        <tr>
          <th>Username</th>
          <th>Name</th>
          <th>City</th>
          <th>Total Count</th>
          <th>Contact</th>
          <th>Joining Date</th>

        </tr>
        <% users.forEach(user=> { %>
          <tr>
            <td>
              <%= user.username %>
            </td>
            <td>
              <%= user.name %>
            </td>
            <td>
              <%= user.city %>
            </td>
            <td>
              <%= user.totalCount %>
            </td>
            <td>
              <%=user.contact%>
            </td>
            <td>
              <%=user.joiningDate%>
            </td>
          </tr>
          <% }); %>
      </table>
    </div>


  </div>

  <script>
    var flag = 1; // Initialize flag to 1

    var menubtn = document.querySelector(".ri-menu-line");
    var menupage = document.querySelector("#slidebar");

    menubtn.addEventListener("click", function () {
      if (flag === 1) {
        menupage.style.transform = "translateY(-2%)";
        flag = 0;
      } else {
        menupage.style.transform = "translateY(-200%)";
        flag = 1;
      }
    });

    var close = document.querySelector("#slidebar #close i");

    close.addEventListener("click", function () {
      menupage.style.transform = "translateY(-200%)";
      flag = 1;
    });

  </script>

</body>

</html>